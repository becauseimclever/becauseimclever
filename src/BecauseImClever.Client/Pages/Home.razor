@page "/"
@using BecauseImClever.Application.Interfaces
@using BecauseImClever.Domain.Entities
@inject IBlogService BlogService

<PageTitle>Home</PageTitle>

<!-- Hero Section -->
<section class="hero">
    <h1>Building Systems & Breaking Code</h1>
    <p>I'm a .NET Developer passionate about Clean Architecture, DDD, and modern web technologies. Welcome to my digital garden.</p>
    <a href="about" class="cta-button">About Me</a>
</section>

<!-- Main Content -->
<main class="main-content">
    
    <!-- Blog Feed -->
    <div class="content-area">
        <h2 style="margin-bottom: 1.5rem; border-left: 4px solid var(--accent-color); padding-left: 1rem;">Latest Posts</h2>
        <div class="blog-grid">
            @if (posts == null)
            {
                <p>Loading posts...</p>
            }
            else if (!posts.Any())
            {
                <p>No posts found.</p>
            }
            else
            {
                @foreach (var post in posts)
                {
                    <article class="card">
                        <div class="card-meta">@post.PublishedDate.ToString("MMM dd, yyyy") &bull; Category</div>
                        <h3><a href="@($"/posts/{post.Slug}")">@post.Title</a></h3>
                        <p>@post.Summary</p>
                        <div class="tags">
                            <!-- Placeholder tags for now, assuming post might have tags later -->
                            <span class="tag">.NET</span>
                            <span class="tag">C#</span>
                        </div>
                    </article>
                }
            }
        </div>
    </div>

    <!-- Sidebar -->
    <Sidebar />

</main>

@code {
    private IEnumerable<BlogPost>? posts;

    protected override async Task OnInitializedAsync()
    {
        posts = await BlogService.GetPostsAsync();
    }
}
