@page "/"
@using BecauseImClever.Application.Interfaces
@using BecauseImClever.Domain.Entities
@inject IBlogService BlogService

<PageTitle>Home</PageTitle>

<!-- Hero Section -->
<section class="hero">
    <h1>Building Systems & Breaking Code</h1>
    <p>I'm a .NET Developer passionate about Clean Architecture, DDD, and modern web technologies. From enterprise software to custom game controllers, I love building things that work.</p>
    <a href="about" class="cta-button">About Me</a>
</section>

<!-- What I Build Section -->
<section class="interests-section">
    <h2 style="margin-bottom: 1.5rem; border-left: 4px solid var(--accent-color); padding-left: 1rem;">What I Build</h2>
    <div class="interests-grid">
        <div class="interest-card">
            <div class="interest-icon">🖨️</div>
            <h3>3D Printing</h3>
            <p>Designing and printing functional parts, enclosures, and prototypes. From custom mounts to full project housings, if I can model it, I can print it.</p>
        </div>
        <div class="interest-card">
            <div class="interest-icon">📡</div>
            <h3>IoT Projects</h3>
            <p>Connecting the physical world to the digital. Home automation, sensors, microcontrollers, and custom firmware—making smart devices that actually do what I want.</p>
        </div>
        <div class="interest-card">
            <div class="interest-icon">🎮</div>
            <h3>Game Controllers</h3>
            <p>Building custom fight sticks and game controllers powered by <a href="https://gp2040-ce.info/" target="_blank" rel="noopener">GP2040-CE</a>. Low latency, highly customizable, and uniquely mine.</p>
        </div>
    </div>
</section>

<!-- Main Content -->
<main class="main-content">
    
    <!-- Blog Feed -->
    <div class="content-area">
        <h2 style="margin-bottom: 1.5rem; border-left: 4px solid var(--accent-color); padding-left: 1rem;">Latest Posts</h2>
        <div class="blog-grid">
            @if (posts == null)
            {
                <p>Loading posts...</p>
            }
            else if (!posts.Any())
            {
                <p>No posts found.</p>
            }
            else
            {
                @foreach (var post in posts)
                {
                    <article class="card">
                        <div class="card-meta">@post.PublishedDate.ToString("MMM dd, yyyy") &bull; Category</div>
                        <h3><a href="@($"/posts/{post.Slug}")">@post.Title</a></h3>
                        <p>@post.Summary</p>
                        <div class="tags">
                            <!-- Placeholder tags for now, assuming post might have tags later -->
                            <span class="tag">.NET</span>
                            <span class="tag">C#</span>
                        </div>
                    </article>
                }
            }
        </div>
        
        <div style="margin-top: 2rem; text-align: center;">
            <a href="posts" class="cta-button" style="background-color: transparent; border: 2px solid var(--accent-color); color: var(--accent-color);">View All Posts</a>
        </div>
    </div>

    <!-- Sidebar -->
    <Sidebar />

</main>

@code {
    private IEnumerable<BlogPost>? posts;

    protected override async Task OnInitializedAsync()
    {
        posts = await BlogService.GetPostsAsync(1, 4);
    }
}
